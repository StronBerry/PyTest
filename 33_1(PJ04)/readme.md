# Автоматизация тестирования страницы авторизации РОСТЕЛЕКОМ (https://b2c.passport.rt.ru/)

## Описание проекта

Проект представляет собой автоматизацию тестирования веб-страницы **Авторизации и Форма Регистрации** с использованием **Python**, **Selenium**, **Pytest** и паттерна **Page Object Model (POM)**. Тесты нацелены на проверку функциональности различных элементов страницы, таких как кнопки, ссылки, чекбоксы, поля ввода и переходы по URL.

## Структура проекта

### Директории и файлы

- **fixtures/**  
  - `browser.py` - фикстура для запуска браузера с обработкой ошибок и снятием скриншотов при падении тестов.  
  - `logger.py` - логирование тестов.  
  - `timer.py` - фикстура для замера времени выполнения тестов.  
  - `__init__.py` - инициализация пакета.

- **pages/**  
  - `base_page.py` - базовый класс для работы с элементами страницы (нахождение, клик, проверка видимости).  
  - `footer_page.py` - класс для работы с элементами подвала страницы.  
  - `header_page.py` - класс для работы с заголовком страницы.  
  - `login_page.py` - класс для работы с элементами формы авторизации.  
  - `__init__.py` - инициализация пакета.

- **tests/**  
  - **logs/** - директория для хранения логов тестов.  
  - **screenshots/** - директория для хранения скриншотов при падении тестов.  
  - Тестовые файлы:
    - `test_header.py` - проверка заголовка страницы.  
    - `test_footer.py`, `test_footer_*` - тесты элементов подвала страницы.  
    - `test_login_page.py` - общие тесты формы авторизации.  
    - `test_login_*` - тесты отдельных вкладок и кнопок страницы авторизации.  
    - `test_status_code.py` - проверка статуса ответа страницы.  

- **Test-Cases/**  
  - `test_cases.xlsx` - содержит две вкладки: "Страница Авторизации" и "Форма Регистрации" с подробным описанием тест-кейсов.  
  - `TS.md` - техническое задание (ТЗ), составленное для уточнения и актуализации задач тестирования. - содержит две вкладки: "Страница Авторизации" и "Форма Регистрации" с подробным описанием тест-кейсов.  

- **config.py** - конфигурация окружения и параметров тестирования.  
- **conftest.py** - общие хуки и фикстуры для тестов.  
- **pytest.ini** - настройки Pytest.  
- **report.html** - отчёт о выполнении тестов, сгенерированный **pytest-html**.

---

## Инструменты тестирования

| **Инструмент**     | **Почему выбран?**                       | **Что проверялось?**                               | **Что делалось?**                                                                 |
|---------------------|-----------------------------------------|---------------------------------------------------|----------------------------------------------------------------------------------|
| **Python**          | Гибкость и поддержка автоматизации тестов| Общая логика тестов, данные и сценарии            | Создание автотестов, логика тестирования, структура проекта                       |
| **Selenium**        | Возможность взаимодействия с браузером  | Элементы интерфейса, клики, тексты, атрибуты      | Управление браузером, клик по элементам, проверка текстов и переходов по ссылкам  |
| **Pytest**          | Простота написания и выполнения тестов  | Тестирование сценариев, логирование, отчёты       | Организация тестов, фикстуры, хуки, выполнение тестов и замер времени             |
| **pytest-html**     | Генерация читаемых отчётов тестирования | Результаты тестов, логи, скриншоты                | Генерация отчёта `report.html` после выполнения тестов                            |
| **pytest-logger**   | Запись результатов тестов и действий    | Логи выполнения тестов, статусы                  | Логирование действий тестов, результатов и времени выполнения                    |
| **pytest-selenium** | Интеграция Pytest и Selenium            | Удобство запуска и отладки тестов Selenium        | Упрощение работы с Selenium через фикстуры                                        |
| **Excel (test_cases.xlsx)** | Чёткая структура тест-кейсов       | Детализация тестов и ожидаемых результатов        | Хранение тест-кейсов в структурированном формате                                  |

---

## Задачи, решаемые инструментами

1. **Python**  
   - Написание тестов и модулей для взаимодействия с элементами страниц.  
   - Использование Page Object Model для организации кода и улучшения его читаемости.  

2. **Selenium**  
   - Проверка поведения элементов интерфейса: кликабельность, видимость, правильность текстов.  
   - Переходы по ссылкам и валидация URL.  
   - Снятие скриншотов при падении тестов.  

3. **Pytest**  
   - Организация и выполнение тестов.  
   - Реализация фикстур для переиспользования браузера, логирования и замера времени.  
   - Обработка результатов тестов через хуки.  

4. **pytest-html**  
   - Генерация отчёта с результатами тестирования.  
   - Отображение статусов тестов, времени выполнения и скриншотов при ошибках.  

5. **Excel (test_cases.xlsx)**  
   - Хранение и документирование тест-кейсов с подробными условиями, шагами и ожидаемыми результатами.  

6. **TS.md**  
   - Хранение актуального технического задания (ТЗ), что позволяет согласовать и актуализировать задачи тестирования.  

---

## Тест-дизайн и подходы

В проекте использованы следующие **техники тест-дизайна**:
1. **Классы эквивалентности**  
   Проверка функциональности для различных групп данных (пустое поле, корректные и некорректные значения).  

2. **Граничные значения**  
   Тестирование ввода данных на границах допустимого диапазона (например, максимальная длина поля ввода).  

3. **Позитивные и негативные сценарии**  
   Проверка успешного и неуспешного ввода данных.  

4. **Тестировка изменения состояний скриптов**  
   Проверка изменений интерфейса при клике на разные вкладки (Телефон, Почта, Логин, Лицевой счёт).  

5. **Тестирование пользовательского сценария**  
   Тесты на кликабельность элементов и переходы по ссылкам.  

---

## Основные функции и тесты

### Форма авторизации:
1. **Проверка взаимодействия скрипта: вкладка - текст-подсказка**:  
   - Телефон → "Мобильный телефон"  
   - Почта → "Электронная почта"  
   - Логин → "Логин"  
   - Лицевой счёт → "Лицевой счет"  

2. **Проверка чекбокса "Запомнить меня"**  
   - По умолчанию установлена галочка.  
   - Галочка снимается и ставится при клике.  

3. **Проверка кнопки "Войти"**  
   - Ввод тестовых данных email и пароля.  
   - Переход на страницу после успешной аутентификации.  

4. **Ссылка "Забыл пароль"**  
   - Переход на страницу восстановления пароля.  

5. **Ссылка "Зарегистрироваться"**  
   - Проверка перехода на форму регистрации.  

### Подвал страницы:
1. Проверка наличия текстов:  
   - **"© 2024 ПАО «Ростелеком». 18+"**  
   - **"Служба поддержки 8 800 100 0 800"**  

2. Переходы по ссылкам:  
   - "Политикой конфиденциальности"  
   - "Пользовательским соглашением"  

3. Проверка всплывающей подсказки "Cookies" при клике на элемент.  

### Статус ответа страницы:  
Проверка, что главная страница возвращает **код 200**.  

### Интеграция авторизации через сторонние сервисы:  
Проверка переходов по кнопкам:  
- Tinkoff  
- Yandex  
- VK  
- Mail.ru  
- Odnoklassniki  

---

## Генерация отчётов

Тесты автоматически генерируют **HTML-отчёт** `report.html` с результатами выполнения:
- Количество пройденных, упавших и пропущенных тестов.  
- Детали ошибок и скриншоты при падении тестов.  
- Время выполнения каждого теста.  

---

## Требования к окружению

1. **Операционная система**:  
   - Windows / macOS / Linux  

2. **Python**:  
   - Версия **3.8** или выше (проект протестирован на Python 3.12.5)  

3. **Браузер Chrome**:  
   - Убедитесь, что **Google Chrome** установлен на вашей машине (рекомендуется последняя версия).  

4. **ChromeDriver**:  
   - Версия ChromeDriver должна соответствовать версии Google Chrome.  
   - [Скачать ChromeDriver](https://chromedriver.chromium.org/downloads) и добавить его в переменную окружения `PATH`.  

5. **Интернет-соединение**:  
   - Доступ к тестируемому веб-сайту.  

---


#### **Установка зависимостей**

Установите все необходимые библиотеки из файла `requirements.txt`:
```bash
pip install -r requirements.txt
```
---
#### **Запуск тестов**

Для запуска всех тестов используйте следующую команду:
```bash
pytest --html=report.html --self-contained-html
```

Эта команда выполнит тесты и сгенерирует HTML-отчёт с результатами (`report.html`).

#### Запуск тестов с логами и временем выполнения:
```bash
pytest --html=report.html --self-contained-html --log-cli-level=INFO
```

#### Запуск конкретного тестового файла:
```bash
pytest tests/test_login_button.py
```

---

#### Тестируемый браузер

В качестве браузера по умолчанию используется **Google Chrome**.  
Для запуска тестов в других браузерах (например, Firefox), необходимо установить **WebDriver** для соответствующего браузера и изменить настройки фикстуры в `fixtures/browser.py`.
